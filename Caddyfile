{
	{$CADDY_DEBUG:}
}

# Site address with optional domain and port
{$DOMAIN:localhost}:{$PORT:80} {
	bind {$BIND_ADDRESS:0.0.0.0}

	root * {$WEB_ROOT:./frontend/dist}

	encode gzip

	reverse_proxy /api/* {$API_HOST:127.0.0.1}:{$API_PORT:8080}

	try_files {path} /index.html

	file_server

	# Production: security headers
	header {
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		Referrer-Policy "no-referrer-when-downgrade"
	}
}
